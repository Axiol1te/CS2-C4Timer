# vim: set sts=2 ts=8 sw=2 tw=99 et ft=python: 
import os

for sdk_target in MMSPlugin.sdk_targets:
  sdk = sdk_target.sdk
  cxx = sdk_target.cxx

  cxx.cxxflags += ['-Wno-invalid-offsetof']
  binary = MMSPlugin.HL2Library(builder, cxx, MMSPlugin.plugin_name, sdk)

  binary.compiler.cxxincludes += [
    os.path.join(builder.currentSourcePath),
  ]

  binary.sources += [
    'C4Timer.cpp',
  ]

  if cxx.target.arch == 'x86':
    binary.sources += ['sourcehook/sourcehook_hookmangen.cpp']
  
  nodes = builder.Add(binary)
  MMSPlugin.binaries += [nodes]
